---
version: '2.1.0'

environment:
  defaultServices:
    - name: 'lc-test'
    - name: 'nginx'
    # - name: 'grpc-echo'

    
services:
  - name: "lc-test"
    defaultUUID: "dev-0"
    docker:
      dockerImage: "bitnami/memcached"
      defaultTag: "latest"
      ports:
        - 11211
      env:
        MEMCACHED_CACHE_SIZE: "512"
      deployment:
        public: false
        resource:
          cpu:
            request: "10m"
          memory:
            request: "200Mi"
        readiness:
          tcpSocketPort: 11211

  - name: "nginx"
    defaultUUID: "dev-0"
    docker:
      dockerImage: "nginx"
      defaultTag: "latest"
      ports:
        - 80
      deployment:
        public: true
        resource:
          cpu:
            request: "10m"
          memory:
            request: "200Mi"
        readiness:
          tcpSocketPort: 80
  
  # - name: "grpc-echo"
  #   helm:
  #     repository: "vmelikyan/lc-test"
  #     branchName: "main"
  #     grpc: true
  #     chart:
  #       name: 'goodrx-app'
  #       valueFiles:
  #         - 'sysops/helm/common.yaml'
  #         - 'sysops/helm/lfc/service/grpc-service.yaml'
  #     docker:
  #       defaultTag: "main"
  #       app:
  #         dockerfilePath: "grpc-echo/Dockerfile"
  #         ports:
  #           - 8080
  #         env:
  #           COMPONENT: "app"
  #           ENV: "lifecycle"

  # - name: "postgres-db"
  #   helm:
  #     repository: "vmelikyan/lc-test"
  #     branchName: "main"
  #     chart:
  #       name: "postgresql"
  #       valueFiles:
  #         - 'sysops/helm/lfc/db/db.yaml'


        

